(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{143:function(e,t,a){e.exports=a.p+"static/media/register.e0abf51c.png"},189:function(e,t,a){},267:function(e,t,a){e.exports=a.p+"static/media/store.9690099b.png"},281:function(e,t,a){e.exports=a(674)},288:function(e,t,a){},289:function(e,t,a){},29:function(e,t,a){},57:function(e,t,a){e.exports=a.p+"static/media/PureRetail_Logo.5947a150.png"},672:function(e,t,a){},674:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=a(88),s=a(11),i=(a(288),a(86)),u=a(260),m="UPDATE_FORM",d="GET_CURRENT_USER",p="GET_INVENTORY",E="LOGOUT_USER",f="LOADING",v="SET_ERRORS",h="CLEAR_ERRORS",y="DELETE_STORE",g="SET_STORE",b="CLEAR_STORE",N="DELETE_ACCOUNT",O="CLEAR_USER",w="ADD_TO_CART",k="SEARCHSTRING",j="INCREMENT",C="DECREMENT",S="REMOVE_ITEM_FROM_CART",I="SET_STORE_URL",L="SAVE_CART",x={};var D=a(26),P={isLoading:!1,errors:{},user:{},storeDetails:{},storeUrl:""};var T=[];var R=a(68),_=[],F=function(e,t){return e.filter((function(e){return e.productId!==t.payload._id}))},q=function(e,t){var a=e.find((function(e){return e.productId===t.payload}));return e.map((function(e){return e.productId===a.productId?Object(D.a)({},e,{quantity:e.quantity+1}):Object(D.a)({},e)}))},U=function(e,t){var a=e.find((function(e){return e.productId===t.payload}));return e.map((function(e){return e.productId===a.productId?Object(D.a)({},e,{quantity:(t=e.quantity,1===t?1:t-1)}):Object(D.a)({},e);var t}))};var A="";var Y={};var M=Object(i.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return localStorage.setItem("user",JSON.stringify(t.payload)),Object(D.a)({},e,{user:Object(D.a)({},t.payload)});case E:return localStorage.removeItem("token"),e;case f:return Object(D.a)({},e,{isLoading:t.payload});case v:return Object(D.a)({},e,{errors:Object(D.a)({},t.payload)});case h:return Object(D.a)({},e,{errors:{}});case y:return Object(D.a)({},e,{storeDetails:{}});case g:return Object(D.a)({},e,{storeDetails:Object(D.a)({},t.payload)});case b:return Object(D.a)({},e,{storeDetails:{}});case O:return Object(D.a)({},e,{user:{}});case N:return Object(D.a)({},e,{isLoading:!1,errors:{},user:{},storeDetails:{}});case I:return localStorage.setItem("storeUrl",t.payload.split("/").slice(3).join("/")),e;default:return e}},store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return[].concat(Object(R.a)(e),[{productId:t.payload._id,quantity:1,price:t.payload.price,name:t.payload.name}]);case S:return F(e,t);case j:return q(e,t);case C:return U(e,t);default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},savedCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return t.payload;default:return e}}}),z=[u.a],B=Object(i.e)(M,{},Object(i.d)(i.a.apply(void 0,z),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),V=a(47),W=Object(V.a)(),G=(a(289),a(71),a(38)),H=(a(37),a(17)),X=(a(53),a(9)),J=(a(39),a(22)),K=(a(44),a(4)),$=(a(48),a(20)),Q=a(14),Z=a(25),ee=a.n(Z),te=a(15),ae=(a(29),a(57)),ne=a.n(ae),re=function(e){var t=e.image;return r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:t||ne.a,alt:"PureRetail Logo"}))},ce=a(143),le=a.n(ce);function oe(){var e=localStorage.getItem("token");return ee.a.create({headers:{"Content-Type":"application/json",Authorization:e}})}var se=function(){return function(e){oe().get("https://shopping-cart-eu3.herokuapp.com/api/store/").then((function(t){e({type:d,payload:t.data}),oe().get("https://shopping-cart-eu3.herokuapp.com/api/store/".concat(t.data._id,"/products")).then((function(t){var a=t.data;e({type:p,payload:a})}))})).catch((function(e){ve(e.response.data)}))}},ie=function(e){return function(t){ee.a.get("https://shopping-cart-eu3.herokuapp.com/api/store/cart/".concat(e)).then((function(e){var a=e.data;t({type:L,payload:a})})).catch((function(e){console.log(e)}))}};var ue=function(){return{type:E}},me=function(e){return{type:g,payload:e}},de=function(e){return{type:k,payload:e}},pe=function(e){return{type:w,payload:e}},Ee=function(e){return{type:S,payload:e}},fe=function(e){return{type:f,payload:e}},ve=function(e){return{type:v,payload:e}},he=function(){return{type:h}},ye=function(e,t){return function(t){ee.a.get("https://shopping-cart-eu3.herokuapp.com/api/store/".concat(e)).then((function(e){t({type:d,payload:e.data})})).catch((function(e){ve(e.response.data)}))}},ge=X.a.create({name:"register"})((function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:e.isLoading},r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"desktop-logo"},r.a.createElement("h2",{className:"register-text"},"Register new account"),r.a.createElement("div",{className:"desktop-logo-large"},r.a.createElement("img",{src:le.a,alt:"PureRetail Logo",width:"300",height:"300"}))),r.a.createElement(re,null),r.a.createElement("div",{className:"desktop-form"},r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll((function(t,a){var n={phone:a.number,password:a.password};t?$.a.error("Enter Required Fields"):(e.dispatch(fe(!0)),ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/auth/register",n).then((function(t){$.a.success("Signed Up"),localStorage.setItem("token",t.data.token),e.dispatch(he()),W.push("/createstore")})).catch((function(t){e.dispatch(ve(t.response.data)),e.dispatch(fe(!1)),$.a.error(Object.values(t.response.data)[0])})))}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("h2",null,"Register new ",r.a.createElement("br",null)," account")),r.a.createElement(X.a.Item,null,o("number",{rules:[{message:"Enter valid phone number"},{required:!0,message:"Enter valid phone number"}]})(r.a.createElement(J.a,{className:"input",placeholder:"Phone number",prefix:r.a.createElement(K.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{hasFeedback:!0},o("password",{rules:[{required:!0,message:"Please input your password!"},{validator:function(t,a,n){var r=e.form;a&&c&&r.validateFields(["confirm"],{force:!0}),n()}}]})(r.a.createElement(J.a.Password,{className:"input",placeholder:"Password",prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{hasFeedback:!0},o("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:function(t,a,n){var r=e.form;a&&a!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()}}]})(r.a.createElement(J.a.Password,{className:"input",onBlur:function(e){var t=e.target.value;l(!!t)},placeholder:"Confirm Password",prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Register"))),r.a.createElement("div",{id:"or_login"},r.a.createElement("p",null,"or ",r.a.createElement(te.a,{to:"/"},"login")," instead")))))})),be=Object(s.b)((function(e){return{isLoading:e.user.isLoading,errors:e.user.errors}}),null)(ge),Ne=X.a.create({name:"register"})((function(e){var t=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:e.isLoading},r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"desktop-logo"},r.a.createElement("h2",{className:"register-text"},"Login to your account"),r.a.createElement("div",{className:"desktop-logo-large"},r.a.createElement("img",{src:le.a,alt:"PureRetail Logo",width:"300",height:"300"}))),r.a.createElement(re,null),r.a.createElement("div",{className:"desktop-form"},r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll((function(t,a){var n={phone:a.number,password:a.password};t?$.a.error("Enter Required Fields"):(e.dispatch(fe(!0)),ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/auth/login",n).then((function(t){$.a.success("Login Successful"),localStorage.setItem("token",t.data.token),e.dispatch(he()),oe().get("https://shopping-cart-eu3.herokuapp.com/api/store").then((function(e){e.data._id?W.push("/dashboard"):W.push("/createstore")})).catch((function(e){"No store found"===e.response.data.message?W.push("/createstore"):$.a.error(Object.values(e.response.data)[0])}))})).catch((function(t){e.dispatch(fe(!1)),e.dispatch(ve(t.response.data)),$.a.error(Object.values(t.response.data)[0])})))}))}}),r.a.createElement("div",{id:"header","data-testid":"log-in"},r.a.createElement("h2",null,"Login")),r.a.createElement(X.a.Item,null,t("number",{rules:[{message:"Enter valid phone number"},{required:!0,message:"Enter valid phone number"}]})(r.a.createElement(J.a,{className:"form-input",placeholder:"Phone number",prefix:r.a.createElement(K.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{hasFeedback:!0},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(r.a.createElement(J.a.Password,{className:"form-input",placeholder:"Password",prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Login"))),r.a.createElement("div",{id:"or_login"},r.a.createElement("p",null,"or ",r.a.createElement(te.a,{to:"/register"},"register")," instead")),r.a.createElement("div",{id:"or_login"},r.a.createElement("p",null,r.a.createElement(te.a,{to:"/resetpassword"},"Forgot password?"))))))})),Oe=Object(s.b)((function(e){return{isLoading:e.user.isLoading,errors:e.user.errors}}),null)(Ne),we=X.a.create({name:"resetPassword"})((function(e){var t=Object(s.c)(),a=Object(s.d)((function(e){return e.user})).isLoading,n=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:a},r.a.createElement("div",{className:"cover"},r.a.createElement(re,null),r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(a){a.preventDefault(),e.form.validateFieldsAndScroll((function(a,n){var r={phone:n.number};a?$.a.error("Please enter a valid phone number to proceed."):(t(fe(!0)),ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/auth/recover",r).then((function(a){$.a.success("Your password reset is on its way!"),t(fe(!1)),t(he()),e.history.push("/")})).catch((function(e){t(fe(!1)),t(ve(e.response.data)),$.a.error(Object.values(e.response.data)[0])})))}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("h2",null,"Reset Password")),r.a.createElement("div",{id:"instruction-text"},r.a.createElement("p",null,"Enter your registered phone number to receive a password reset link via SMS:")),r.a.createElement(X.a.Item,null,n("number",{rules:[{message:"Enter a valid phone number"},{required:!0,message:"Enter a valid phone number"}]})(r.a.createElement(J.a,{placeholder:"Phone number",prefix:r.a.createElement(K.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Get link"))),r.a.createElement("div",{id:"back-to-login"},r.a.createElement(te.a,{to:"/"},"Back to login")),r.a.createElement("div",{id:"contact-support"},r.a.createElement(te.a,{to:"/support"},"Contact support"))))})),ke=(a(104),a(54)),je=X.a.create({name:"setNewPassword"})((function(e){var t=Object(s.c)(),a=Object(s.d)((function(e){return e.user})).isLoading,c=Object(n.useState)(!1),l=Object(Q.a)(c,2),o=l[0],i=l[1],u=window.location.href.split("=")[1],m="https://shopping-cart-eu3.herokuapp.com/api/auth/reset/".concat(u),d=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:a},r.a.createElement("div",{className:"cover"},r.a.createElement(re,null),r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(a){a.preventDefault(),e.form.validateFieldsAndScroll((function(e,a){var n={password:a.password};e?$.a.error("Password validation failed."):(t(fe(!0)),ee.a.post(m,n).then((function(e){t(fe(!1)),t(he()),ke.a.info({title:"Success",content:"Your password has been reset successfully.",centered:!0,onOk:function(){W.push("/")}})})).catch((function(e){t(fe(!1)),t(ve(e.response.data)),$.a.error(Object.values(e.response.data)[0])})))}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("h2",null,"Reset password")),r.a.createElement(X.a.Item,{hasFeedback:!0},d("password",{rules:[{required:!0,message:"Please input your new password!"},{validator:function(t,a,n){var r=e.form;a&&o&&r.validateFields(["confirm"],{force:!0}),n()}}]})(r.a.createElement(J.a.Password,{placeholder:"New Password",prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{hasFeedback:!0},d("confirm",{rules:[{required:!0,message:"Please confirm your new password!"},{validator:function(t,a,n){var r=e.form;a&&a!==r.getFieldValue("password")?n("The two passwords that you entered do not match!"):n()}}]})(r.a.createElement(J.a.Password,{onBlur:function(e){var t=e.target.value;i(!!t)},placeholder:"Confirm New Password",prefix:r.a.createElement(K.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Reset"))),r.a.createElement("div",{id:"or_login"},r.a.createElement("p",null,"or ",r.a.createElement(te.a,{to:"/"},"login")," instead"))))})),Ce=(a(183),a(58)),Se=a(267),Ie=a.n(Se),Le=Ce.a.Option,xe=X.a.create({name:"register"})((function(e){var t=Object(s.c)(),a=e.form.getFieldDecorator;return r.a.createElement("div",{id:"create-store",className:"cover"},r.a.createElement("div",{className:"desktop-logo-large"},r.a.createElement("img",{src:Ie.a,alt:"PureRetail Logo",width:"300",height:"300"})),r.a.createElement(re,null),r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(a){a.preventDefault(),e.form.validateFieldsAndScroll({force:!0},(function(e,a){var n={name:a.name,currency:a.currency};e?$.a.error("Enter Required Fields"):(t({type:m,payload:n}),W.push("/addlogo"))}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("h2",{id:"get-started"},"Lets get started!"),r.a.createElement("p",null,"You're in! Let's get your account started in a few clicks. First, tell us how you'd like to be addressed and how you'd like to be paid.")),r.a.createElement(X.a.Item,null,a("name",{rules:[{message:"Enter your name"},{required:!0,message:"Enter your name"}]})(r.a.createElement(J.a,{placeholder:"My name is..."}))),r.a.createElement(X.a.Item,{hasFeedback:!0},a("currency",{rules:[{required:!0,message:"Select preferred currency"}]})(r.a.createElement(Ce.a,{placeholder:"... and I prefer to sell in"},r.a.createElement(Le,{value:"DOL"},"DOL"),r.a.createElement(Le,{value:"POU"},"POU"),r.a.createElement(Le,{value:"EUR"},"EUR"),r.a.createElement(Le,{value:"YEN"},"YEN")))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Next"))))})),De=(a(192),a(109));function Pe(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||$.a.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||$.a.error("Image must smaller than 2MB!"),t&&a}var Te=X.a.create({name:"register"})((function(e){var t=Object(s.c)(),a=Object(n.useState)(""),c=Object(Q.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(Q.a)(i,2),m=u[0],d=u[1],p=Object(s.d)((function(e){return e.form})),E=Object(s.d)((function(e){return e.user}));Object(n.useEffect)((function(){t(fe(!1))}),[t]);var f=r.a.createElement("div",{id:"upload-button"},r.a.createElement(K.a,{type:m?"loading":"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload")),v=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:E.isLoading},r.a.createElement("div",{className:"cover",id:"create-store"},r.a.createElement("div",{id:"header"},r.a.createElement("h2",{id:"get-started"},"Upload store",r.a.createElement("br",null),"logo")),r.a.createElement("div",{id:"add-logo-image"},r.a.createElement(De.a,{name:"avatar",customRequest:function(e){var t=e.file,a=e.onSuccess,n=new FormData;n.append("upload_preset","pure-retail"),n.append("file",t);ee.a.post("https://api.cloudinary.com/v1_1/pureretail/upload",n,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){var t=e.data.secure_url;o(t)})),setTimeout((function(){a("ok")}),0)},listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:Pe,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return o(e)}),d(!1)):d(!0)}},l?r.a.createElement("img",{src:l,alt:"avatar",style:{width:"100%",height:"100%"}}):f),r.a.createElement("div",{id:"upload-text"},r.a.createElement("p",null,"Click to upload",r.a.createElement("br",null),"store logo (optional)"))),r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(a){a.preventDefault(),e.form.validateFieldsAndScroll((function(e,a){var n={ownerName:p.name,currency:p.currency,imageUrl:l,storeName:a.store,address:a.address};e?$.a.error("Enter Required Fields"):(t(fe(!0)),oe().post("https://shopping-cart-eu3.herokuapp.com/api/store",n).then((function(e){t(me(e.data.saved)),$.a.success("store created"),t(fe(!1)),t(he()),W.push("/dashboard")})).catch((function(e){t(fe(!1)),t(ve(e.response.data)),$.a.error(Object.values(e.response.data)[0])})))}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("h2",{id:"get-started"},"Give your store",r.a.createElement("br",null),"a name and an address!")),r.a.createElement(X.a.Item,null,v("store",{rules:[{message:"Enter your store name"},{required:!0,message:"Enter your store name"}]})(r.a.createElement(J.a,{placeholder:"My store's name is..."}))),r.a.createElement(X.a.Item,null,v("address",{rules:[{message:"Enter your store address"},{required:!0,message:"Enter your store address"}]})(r.a.createElement(J.a,{placeholder:"My store's address is..."}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Done")))))})),Re="https://shopping-cart-eu3.herokuapp.com/api/store/products";var _e=X.a.create({name:"createItem"})((function(e){var t=e.dispatch,a=e.form,c=e.isLoading,l=Object(n.useState)([]),o=Object(Q.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)([]),m=Object(Q.a)(u,2),d=m[0],p=m[1],E=J.a.TextArea;Object(n.useEffect)((function(){t(fe(!1))}),[t]);var f=a.getFieldDecorator;return r.a.createElement(G.a,{spinning:c},r.a.createElement("div",{className:"cover",id:"createUpdate"},r.a.createElement("div",{id:"header"},r.a.createElement("h2",{id:"get-started"},"Upload new",r.a.createElement("br",null),"store item")),r.a.createElement("div",{id:"uploadHead",style:{height:"30%",width:"100%"}},r.a.createElement(De.a,{style:{height:"20%",width:"20%"},listType:"picture-card",fileList:s,customRequest:function(e){var t=e.file,a=e.onSuccess,n=new FormData;n.append("upload_preset","pure-retail"),n.append("file",t);ee.a.post("https://api.cloudinary.com/v1_1/pureretail/upload",n,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){var t=e.data.secure_url,a=[].concat(Object(R.a)(d),[t]);p(a)})),setTimeout((function(){a("ok")}),0)},onChange:function(e){var t=Object(R.a)(e.fileList);t=(t=t.slice(-4)).map((function(e){return e.response&&(e.url=e.response.url),e})),i(t)}},r.a.createElement(K.a,{style:{width:"20px"},type:"upload"}))),r.a.createElement(X.a,Object.assign({className:"inputForm"},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(e){e.preventDefault(),a.validateFieldsAndScroll((function(e,a){var n={name:a.name,description:a.description,price:a.price,stock:a.stock||0,images:d};e?$.a.error("Enter Required Fields"):(t(fe(!0)),oe().post(Re,n).then((function(e){$.a.success("Item Added"),t(fe(!1)),t(he()),W.push("/inventory")})).catch((function(e){t(fe(!1)),t(ve(e.response.data)),$.a.error(Object.values(e.response.data)[0])})))}))}}),r.a.createElement(X.a.Item,null,f("name",{rules:[{message:"Name"},{required:!0,message:"Enter a Name"}]})(r.a.createElement(J.a,{placeholder:"Name"}))),r.a.createElement(X.a.Item,null,f("price",{rules:[{message:"Enter a price"},{required:!0,message:"Enter a price"}]})(r.a.createElement(J.a,{placeholder:"Price"}))),r.a.createElement(X.a.Item,null,f("stock",{rules:[{message:"Enter stock"}]})(r.a.createElement(J.a,{placeholder:"Stock"}))),r.a.createElement(X.a.Item,null,f("description",{rules:[{message:"Enter a description"},{required:!0,message:"Enter a description"}]})(r.a.createElement(E,{placeholder:"Description",allowClear:!0}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Done")),r.a.createElement("div",null,r.a.createElement("p",{onClick:function(e){e.preventDefault(),W.push("/inventory")}},"Cancel")))))})),Fe=Object(s.b)((function(e){return{isLoading:e.user.isLoading,errors:e.user.errors}}),null)(_e);var qe=X.a.create()((function(e){var t=Object(n.useState)([]),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),s=Object(Q.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)([]),d=Object(Q.a)(m,2),p=d[0],E=d[1],f=J.a.TextArea,v=e.match.params.id,h="https://shopping-cart-eu3.herokuapp.com/api/store/products/".concat(v);Object(n.useEffect)((function(){oe().get("https://shopping-cart-eu3.herokuapp.com/api/store/products/".concat(v)).then((function(e){var t=e.data.images.map((function(e,t){return{uid:-t,name:"photo ".concat(t,".jpg"),url:e}}));u(t),l(e.data)}))}),[v]);var y=e.form.getFieldDecorator;return r.a.createElement(G.a,{spinning:e.isLoading},r.a.createElement("div",{className:"cover",id:"createUpdate"},r.a.createElement("div",{id:"header"},r.a.createElement("h2",{id:"get-started"},"Update ",c.name)),r.a.createElement("div",{id:"uploadHead",style:{height:"30%",width:"100%"}},r.a.createElement(De.a,{listType:"picture-card",fileList:i,customRequest:function(e){var t=e.file,a=e.onSuccess,n=new FormData;n.append("upload_preset","pure-retail"),n.append("file",t);ee.a.post("https://api.cloudinary.com/v1_1/pureretail/upload",n,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){var t=e.data.secure_url,a=[].concat(Object(R.a)(p),[t]);E(a)})),setTimeout((function(){a("ok")}),0)},onChange:function(e){var t=Object(R.a)(e.fileList);t=(t=t.slice(-4)).map((function(e){return e.response&&(e.url=e.response.url),e})),u(t)}},r.a.createElement(K.a,{style:{width:"20px"},type:"upload"}))),r.a.createElement(X.a,Object.assign({className:"inputForm"},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll((function(t,a){var n=[].concat(Object(R.a)(p),Object(R.a)(i.filter((function(e){return e.url})).map((function(e){return e.url})))),r={name:a.name,description:a.description,price:a.price,stock:a.stock||0,images:n};t?$.a.error("Validation failed"):(e.dispatch(fe(!0)),oe().put(h,r).then((function(t){$.a.success("item updated"),e.dispatch(fe(!1)),e.dispatch(he()),W.push("/inventory")})).catch((function(t){e.dispatch(fe(!1)),e.dispatch(ve(t.response.data)),$.a.error(Object.values(t.response.data)[0])})))}))}}),r.a.createElement(X.a.Item,null,y("name",{initialValue:c.name,rules:[{message:"Name"},{required:!0,message:"Enter a Name"}]})(r.a.createElement(J.a,{placeholder:"Name"}))),r.a.createElement(X.a.Item,null,y("price",{initialValue:c.price})(r.a.createElement(J.a,{placeholder:"Price"}))),r.a.createElement(X.a.Item,null,y("stock",{initialValue:c.stock})(r.a.createElement(J.a,{placeholder:"Stock"}))),r.a.createElement(X.a.Item,null,y("description",{initialValue:c.description,rules:[{message:"Enter a description"},{required:!0,message:"Enter a description"}]})(r.a.createElement(f,{placeholder:"Description",allowClear:!0}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Done")),r.a.createElement("div",null,r.a.createElement("p",{onClick:function(e){e.preventDefault(),W.push("/inventory")}},"Cancel")))))})),Ue=Object(s.b)((function(e){return{isLoading:e.user.isLoading,errors:e.user.errors}}),null)(qe),Ae=a(157),Ye=function(e){var t=e.component,a=Object(Ae.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/"})}}))},Me=function(e){var t=e.component,a=Object(Ae.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token"),r.a.createElement(t,e)}}))},ze=(a(193),a(56)),Be=(a(138),a(55)),Ve=(a(254),a(153)),We=(a(186),a(79)),Ge=ke.a.confirm,He=We.a.Meta,Xe=function(e){var t=e.inventory,a=Object(s.c)();return r.a.createElement(Ve.a,null,t.map((function(e){return r.a.createElement(We.a,{key:e.name,hoverable:!0,style:{width:240,height:"45%"},cover:e.images[0]?r.a.createElement("img",{alt:"item",src:e.images[0]}):void 0},r.a.createElement(He,{title:r.a.createElement("div",{className:"list title"},r.a.createElement("div",null,r.a.createElement("h3",null,e.name),r.a.createElement("p",null,e.description)),r.a.createElement(te.b,{to:"/updateitem/".concat(e._id)},r.a.createElement("div",null,"Edit"))),description:r.a.createElement("div",{className:"list"},r.a.createElement("div",null,e.price),r.a.createElement("div",{id:"delete",onClick:function(t){return n=e._id,void Ge({title:"Are you sure you want to delete this item?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){oe().delete("https://shopping-cart-eu3.herokuapp.com/api/store/products/".concat(n)).then((function(e){a(se()),$.a.success("Item Deleted")})).catch((function(e){$.a.error(Object.values(e.response.data)[0])}))},onCancel:function(){}});var n}},"DELETE"))}))})))},Je=Be.a.TabPane,Ke=J.a.Search,$e=function(e){var t=e.inventory;return r.a.createElement(ze.a,{size:"small",itemLayout:"horizontal",dataSource:t,renderItem:function(e){return r.a.createElement(ze.a.Item,{className:"block"},r.a.createElement(ze.a.Item.Meta,{title:r.a.createElement("div",{className:"list title short"},r.a.createElement("h3",null,e.name),r.a.createElement("div",null,e.price)),description:r.a.createElement("div",{className:"list short"},r.a.createElement("div",null,e.description),r.a.createElement(te.b,{to:"/updateitem/".concat(e._id)},r.a.createElement("div",null,"Edit")))}))}})},Qe=function(){var e=Object(n.useState)(""),t=Object(Q.a)(e,2),a=t[0],c=t[1],l=Object(s.c)();Object(n.useEffect)((function(){l(se())}),[l]);var o=Object(s.d)((function(e){return e.store})),i=Object(s.d)((function(e){return e.user}));var u=o.filter((function(e){return function(e,t){var a=new RegExp(t,"gi");return JSON.stringify(e).match(a)}(e,a)}));return r.a.createElement("div",{className:"cover inventory"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"search"},r.a.createElement(Ke,{onChange:function(e){c(e.target.value)},placeholder:"search",style:{width:200}})),r.a.createElement("div",{className:"content"},r.a.createElement("div",null,i.storeDetails.ownerName?r.a.createElement("h2",null,i.storeDetails.ownerName,"'s Store"):r.a.createElement("h2",null,"Your Store")),r.a.createElement("div",null,r.a.createElement(Be.a,{className:"tabs",defaultActiveKey:"1"},r.a.createElement(Je,{tab:"Collapse",key:"1"},r.a.createElement($e,{inventory:a?u:o})),r.a.createElement(Je,{tab:"Expand",key:"2"},r.a.createElement(Xe,{inventory:a?u:o})))))))};var Ze=function(){return r.a.createElement("div",{className:"nav"},r.a.createElement("ul",{id:"nav_ul"},r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"dashboard",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"home"}),r.a.createElement("p",null,"Home"))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"inventory",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"shop"}),r.a.createElement("p",null,"Store"))),r.a.createElement("li",{id:"add"},r.a.createElement(te.b,{className:"navlink",to:"createItem"},r.a.createElement(K.a,{className:"icon",theme:"filled",type:"plus-circle"}))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"account",activeClassName:"activeLink"}," ",r.a.createElement(K.a,{className:"icon",type:"wallet"}),r.a.createElement("p",null,"Account"))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"profile",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"user"}),r.a.createElement("p",null,"Profile")))))};var et=function(){return r.a.createElement("div",null,r.a.createElement(Qe,null),r.a.createElement(Ze,null))},tt=a(142),at=Ce.a.Option,nt=X.a.create()((function(e){var t=e.dispatch,a=e.isLoading,c=e.form,l=Object(n.useState)({ownerName:"",currency:"",storeName:"",imageUrl:"",address:""}),o=Object(Q.a)(l,2),s=o[0],i=o[1];Object(n.useEffect)((function(){t(fe(!0)),t(se()),oe().get("https://shopping-cart-eu3.herokuapp.com/api/store/").then((function(e){var a=e.data,n=a.ownerName,r=a.currency,c=a.storeName,l=a.address;i({ownerName:n,currency:r,storeName:c,address:l}),t(fe(!1))})).catch((function(e){t(fe(!1)),p(e.response.data)}))}),[t]);var u=Object(n.useState)({}),m=Object(Q.a)(u,2),d=m[0],p=m[1],E=function(e){i(Object(D.a)({},s,Object(tt.a)({},e.target.name,e.target.value)))},f=function(){t(ue()),W.push("/")},v=c.getFieldDecorator,h={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},y=r.a.createElement("div",{className:"cover"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:ne.a,alt:"PureRetail Logo"})),r.a.createElement("p",{className:"text"},"You currently haven't created a store yet"),r.a.createElement("p",{className:"text"},"Click"," ",r.a.createElement(te.a,{className:"link",to:"/createstore"},"here")," ","to create one"),r.a.createElement(H.a,{onClick:f,type:"primary",htmlType:"button"},"Logout")),g=r.a.createElement(G.a,{spinning:a},r.a.createElement("div",{className:"cover"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:ne.a,alt:"PureRetail Logo"})),r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(e){e.preventDefault(),t(fe(!0)),p({}),c.validateFieldsAndScroll({force:!0},(function(e,a){e&&$.a.error("Enter Required Fields"),oe().put("https://shopping-cart-eu3.herokuapp.com/api/store/",a).then((function(e){t(me(e.data)),$.a.success("Your store has been updated"),W.push("/dashboard")})).catch((function(e){$.a.error(Object.values(e.response.data)[0]),p(e.response.data)}))}))}}),r.a.createElement("div",{id:"header"},"Edit your profile"),r.a.createElement(X.a.Item,null,v("ownerName",{initialValue:s.ownerName,rules:[{message:"Enter your name"},{required:!0,message:"Enter your name"}]})(r.a.createElement(J.a,{onChange:E,name:"ownerName",placeholder:"Name of Store owner"}))),r.a.createElement(X.a.Item,{hasFeedback:!0},v("currency",{initialValue:s.currency,rules:[{required:!0,message:"Select preferred currency"}]})(r.a.createElement(Ce.a,{name:"currency",placeholder:"Select your currency"},r.a.createElement(at,{value:"DOL"},"DOL"),r.a.createElement(at,{value:"POU"},"POU"),r.a.createElement(at,{value:"EUR"},"EUR"),r.a.createElement(at,{value:"YEN"},"YEN")))),r.a.createElement(X.a.Item,null,v("storeName",{initialValue:s.storeName,rules:[{message:"Store name is required"},{required:!0,message:"Store name is required"}]})(r.a.createElement(J.a,{onChange:E,name:"storeName",placeholder:"Store name"}))),r.a.createElement(X.a.Item,null,v("address",{initialValue:s.address,rules:[{message:"Store address is required"},{required:!0,message:"Store address is required"}]})(r.a.createElement(J.a,{onChange:E,name:"address",placeholder:"Store address"}))),r.a.createElement(X.a.Item,h,r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Update")),r.a.createElement(X.a.Item,h,r.a.createElement(H.a,{onClick:f,type:"primary",htmlType:"button"},"Logout")),r.a.createElement(X.a.Item,h,r.a.createElement(H.a,{onClick:function(){(0,ke.a.confirm)({title:"Are you sure you want to delete your account?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t(fe(!0)),t((function(e){fe(!0),oe().delete("https://shopping-cart-eu3.herokuapp.com/api/auth/account").then((function(t){ue(),e({type:N})})).catch((function(e){ve(e.response.data)}))})),t(ue()),W.push("/register")},onCancel:function(){}})},id:"delete-btn",type:"link",htmlType:"button"},"Delete account")))));return d.message?y:g})),rt=Object(s.b)((function(e){return{isLoading:e.user.isLoading}}),null)(nt);var ct=function(){return r.a.createElement("div",{className:"nav",style:{backgroundColor:"transparent"}},r.a.createElement("ul",{id:"nav_ul"},r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"dashboard",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"home"}),r.a.createElement("p",null,"Home"))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"inventory",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"shop"}),r.a.createElement("p",null,"Store"))),r.a.createElement("li",{id:"add"}),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"account",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"wallet"}),r.a.createElement("p",null,"Account"))," "),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"profile",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"user"}),r.a.createElement("p",null,"Profile")))))};var lt=function(){return r.a.createElement("div",null,r.a.createElement(rt,null),r.a.createElement(ct,null))};var ot=function(){return r.a.createElement("div",{className:"nav",style:{backgroundColor:"white"}},r.a.createElement("ul",{id:"nav_ul"},r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"dashboard",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"home"}),r.a.createElement("p",null,"Home"))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"inventory",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"shop"}),r.a.createElement("p",null,"Store"))),r.a.createElement("li",{id:"add"},r.a.createElement(te.b,{className:"navlink",to:"createItem"},r.a.createElement(K.a,{className:"icon",theme:"filled",type:"plus-circle"}))),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"account",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"wallet"}),r.a.createElement("p",null,"Account"))," "),r.a.createElement("li",{className:"li"},r.a.createElement(te.b,{to:"profile",activeClassName:"activeLink"},r.a.createElement(K.a,{className:"icon",type:"user"}),r.a.createElement("p",null,"Profile")))))},st=(a(189),function(e){var t=e.currency;return r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"left",marginLeft:"40px",paddingTop:"20px"}},"Earnings"),r.a.createElement("div",{id:"cards"},r.a.createElement("div",{className:"Cards"},r.a.createElement("p",{style:{color:"white",paddingTop:"20px"}},"This month you earned:"),r.a.createElement("p",{className:"earnings"},"0",r.a.createElement("span",{className:"currency"}," ",t))),r.a.createElement("div",{className:"Cards2"},r.a.createElement("p",{style:{color:"white",paddingTop:"20px"}},"Lifetime earnings:"),r.a.createElement("p",{className:"earnings"},"0",r.a.createElement("span",{className:"currency"}," ",t)))))}),it=function(){return r.a.createElement("div",{className:"Card2"},r.a.createElement("div",{className:"PaneFlex"},r.a.createElement(K.a,{type:"check-circle",style:{color:"#BFD7EA"}}),r.a.createElement("div",{className:"StoreTitle"},r.a.createElement("h2",null,"Calvin Klein Boxers Shorts"),r.a.createElement("p",null,"Fine linen, rare edition, worn by Bieber")),r.a.createElement("div",{className:"StorePrice"},r.a.createElement("h2",null,"+\u20a6500"),r.a.createElement("p",null,"Dec. 14"))))},ut=Be.a.TabPane,mt=function(e){var t=e.currency;return r.a.createElement("div",null,r.a.createElement(Be.a,{defaultActiveKey:"1",className:"content"},r.a.createElement(ut,{tab:"Overview",key:"1"},r.a.createElement(st,{currency:t})),r.a.createElement(ut,{tab:"Sales History",key:"2"},"Today",r.a.createElement(it,null),r.a.createElement(it,null),r.a.createElement(it,null),"Yesterday",r.a.createElement(it,null))))},dt=(a(523),a(677)),pt=a(678),Et=a(679),ft=a(680),vt=a(681),ht=a(682),yt=a(683),gt=a(684),bt=a(685),Nt=a(686),Ot=function(){var e=Object(s.c)();Object(n.useEffect)((function(){e(se())}),[e]);var t=Object(s.d)((function(e){return e.user.user})),a="".concat(window.location.origin.toString(),"/store/").concat(t&&t.storeName&&t.storeName.toLowerCase().split(" ").join("-"),"-").concat(t&&t._id),c=t.imageUrl?t.imageUrl:ne.a;return r.a.createElement("div",{className:"mainDiv"},r.a.createElement("div",{className:"dashboardHeader"},r.a.createElement("div",{className:"welcomeHeader"},"Welcome, ",r.a.createElement("br",null),r.a.createElement("span",{className:"name"},t.ownerName?t.ownerName:"Seller","!")),r.a.createElement("div",{className:"dashboardLogo"},r.a.createElement("img",{src:c,alt:"Store Logo"}))),r.a.createElement("div",{className:"storeUrl"},r.a.createElement("p",{id:"storeUrl"},t&&a),r.a.createElement("div",{className:"share"},r.a.createElement(dt.a,{url:t&&a},r.a.createElement(pt.a,{size:32,round:!0})),r.a.createElement(Et.a,{url:t&&a},r.a.createElement(ft.a,{size:32,round:!0})),r.a.createElement(vt.a,{url:t&&a},r.a.createElement(ht.a,{size:32,round:!0})),r.a.createElement(yt.a,{url:t&&a},r.a.createElement(gt.a,{size:32,round:!0})),r.a.createElement(bt.a,{url:t&&a},r.a.createElement(Nt.a,{size:32,round:!0})))),r.a.createElement("div",{className:"dashDiv"},r.a.createElement(mt,{currency:t.currency})))};var wt=function(){return r.a.createElement("div",null,r.a.createElement(Ot,null),r.a.createElement(ot,null))},kt=Be.a.TabPane,jt=We.a.Meta,Ct=function(e){var t=e.inventory,a=e.currency,n=e.dispatchItem,c=e.cartContents,l=e.removeItem,o=function(e){return c.find((function(t){return t.productId===e._id}))};return t.map((function(e){return r.a.createElement(We.a,{key:e.name,hoverable:!0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"45%",margin:"0.5rem",boxSizing:"border-box",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)"},cover:e.images[0]?r.a.createElement(te.b,{to:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:"100%",height:"13rem"},alt:"item",src:e.images[0]})):void 0},r.a.createElement(jt,{title:r.a.createElement("div",{className:"small-label"},r.a.createElement("p",null,e.name),r.a.createElement("div",{className:"sprice"},a,e.price),r.a.createElement("div",{className:"sadd"},o(e)?r.a.createElement(H.a,{onClick:function(){return l(e)},style:{color:"dodgerblue"},type:"link",size:"large"},"Remove from Cart"):r.a.createElement(H.a,{onClick:function(){return n(e)},style:{color:"#FF5A5A"},type:"link",size:"large"},"Add to Cart")))}))}))},St=function(e){var t=e.inventory,a=e.currency,n=e.dispatchItem,c=e.cartContents,l=e.removeItem,o=function(e){return c.find((function(t){return t.productId===e._id}))};return t.map((function(e){return r.a.createElement(We.a,{key:e.name,bordered:"false",className:"cards",hoverable:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"90%",margin:"0.5rem",borderRadius:"2rem",boxSizing:"border-box",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)"},cover:e.images[0]?r.a.createElement(te.b,{to:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:"100%",height:"32rem",margin:"0"},alt:"item",src:e.images[0]})):void 0},r.a.createElement(jt,{title:r.a.createElement("div",{className:"label"},r.a.createElement("h3",{className:"desc"},e.name),r.a.createElement("div",{className:"price"},a,e.price),r.a.createElement("div",{className:"add"},o(e)?r.a.createElement(H.a,{onClick:function(){return l(e)},style:{color:"dodgerblue"},type:"link",size:"large"},"Remove from Cart"):r.a.createElement(H.a,{onClick:function(){return n(e)},style:{color:"#FF5A5A"},type:"link",size:"large"},"Add to Cart")))}))}))},It=function(e){var t=e.sellerId,a=e.cartContents,c=e.store,l=Object(n.useState)(""),o=Object(Q.a)(l,2),i=o[0],u=o[1],m=Object(s.c)();Object(n.useEffect)((function(){var e;m(function(e,t){return function(t){ee.a.get("https://shopping-cart-eu3.herokuapp.com/api/store/".concat(e,"/products")).then((function(e){var a=e.data;t({type:p,payload:a})})).catch((function(e){ve(e.response.data)}))}}(t)),m(ye(t)),m((e=window.location.href,{type:I,payload:e}))}),[t,m]);var d=Object(s.d)((function(e){return e.store})),E=c.user,f=Object(s.d)((function(e){return e.search}));Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)u("\xa3");else if("DOL"===e.currency)u("$");else if("EUR"===e.currency)u("\u20ac");else{if("YEN"!==e.currency)return;u("\xa5")}}(E)}),[E]);var v=function(e){m(Ee(e))},h=d.filter((function(e){return function(e,t){var a=new RegExp(t,"gi");return JSON.stringify(e).match(a)}(e,f)})),y=function(e){m(pe(e))};return r.a.createElement("div",{className:"cover store"},r.a.createElement("div",{className:"store-top"},r.a.createElement("div",{className:"store-info"},r.a.createElement("div",{className:"store-logo",id:"create-store-logo"},null===E.imageUrl?void 0:r.a.createElement("img",{alt:"logo",src:E.imageUrl,className:"image"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",null,r.a.createElement("h2",{style:{paddingTop:"0"}},E.storeName)),r.a.createElement("div",{className:"card-bucket"},r.a.createElement(Be.a,{className:"tabs",defaultActiveKey:"1"},r.a.createElement(kt,{tab:"Large Detail",key:"1"},r.a.createElement("div",{className:"large_wrap"},r.a.createElement(St,{inventory:f?h:d,currency:i,dispatchItem:y,cartContents:a,removeItem:v}))),r.a.createElement(kt,{tab:"Small Detail",key:"2"},r.a.createElement("div",{className:"wrap"},r.a.createElement(Ct,{inventory:f?h:d,currency:i,dispatchItem:y,cartContents:a,removeItem:v}))))))))))},Lt=(a(187),a(67)),xt=(a(255),a(158)),Dt=(a(188),a(36)),Pt=J.a.Search,Tt=function(e){var t,a=e.logoPath,c=(e.badgeCount,e.currency,e.totalDue,e.displayBack),l=e.displayTotal,o=e.top,i=void 0!==o&&o,u=Object(n.useState)(""),m=Object(Q.a)(u,2),d=m[0],p=m[1],E=Object(s.c)(),f=Object(s.d)((function(e){return e.cart})),v=Object(s.d)((function(e){return e.user.user}));return Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)p("\xa3");else if("DOL"===e.currency)p("$");else if("EUR"===e.currency)p("\u20ac");else{if("YEN"!==e.currency)return;p("\xa5")}}(v)}),[v]),r.a.createElement(Lt.a,{className:i?"store-color store-cart-header":"store-cart-header",type:"flex",justify:"space-between",align:"middle"},r.a.createElement(Dt.a,{span:6,className:"store-logo"},c?r.a.createElement(K.a,{onClick:W.goBack,type:"left-circle"}):r.a.createElement("img",{src:a||ne.a,alt:"Store Logo"})),r.a.createElement(Dt.a,{span:12,className:"store-total"},r.a.createElement("div",{className:"name"},r.a.createElement("h2",null,v.storeName)),l?"Total: ".concat(d).concat((t=f,t.reduce((function(e,t){return e+t.price*t.quantity}),0)).toFixed(2)):r.a.createElement(Pt,{onChange:function(e){E(de(e.target.value))},placeholder:"search"})),r.a.createElement(te.b,{to:"/review"},r.a.createElement(Dt.a,{span:6,className:"store-icon"},r.a.createElement(xt.a,{className:"badge",style:{backgroundColor:"gold",color:"black"},count:function(e){return e.reduce((function(e,t){return e+t.quantity}),0)}(f)},r.a.createElement(K.a,{type:"shopping-cart",className:"sup"})))))};var Rt=function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=e.match.params.id.split("-").pop(),i=Object(s.d)((function(e){return e.cart})),u=Object(s.d)((function(e){return e.user})),m=0;return window.addEventListener("scroll",(function(){var e=window.pageYOffset||document.documentElement.scrollTop;l(e>m),m=e<=0?0:e}),!1),r.a.createElement("div",null,r.a.createElement(Tt,{top:c,badgeCount:i.length,logoPath:u.user.imageUrl}),r.a.createElement(It,{sellerId:o,cartContents:i,store:u}))},_t=(a(658),a(202)),Ft=a(85),qt={base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},Ut=function(){return r.a.createElement("label",null,"Card details",r.a.createElement(Ft.CardElement,{className:"MyCardElement",style:qt}))},At=Object(Ft.injectStripe)((function(e){return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.stripe.confirmCardPayment(e.clientId,{payment_method:{card:e.elements.getElement("card"),billing_details:{name:"Jenny Rosen"}}}).then((function(e){e.paymentIntent?W.push("/success"):$.a.error("Transaction failed")})).catch((function(e){$.a.error(e.message)}))}},r.a.createElement(Ut,null),r.a.createElement("button",null,"Confirm order"))})),Yt=function(e){return r.a.createElement(Ft.Elements,null,r.a.createElement(At,{clientId:e.clientId}))},Mt=_t.a.Panel,zt=function(e){var t=e.cartId,a=Object(n.useState)(""),c=Object(Q.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),u=Object(Q.a)(i,2),m=u[0],d=u[1],p=Object(s.d)((function(e){return e.savedCart})),E=new Date(p.checkoutDate||0),f=Object(s.c)();return Object(n.useEffect)((function(){f(ie(t))}),[f,t]),Object(n.useEffect)((function(){ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/payment/charge",{amount:p.agreedPrice,storeId:p.storeId}).then((function(e){o(e.data.paymentIntent.client_secret),d(e.data.stripeId)})).catch((function(e){console.log(e)}))}),[p.agreedPrice,p]),r.a.createElement("div",{className:"payments-cover"},r.a.createElement("div",{className:"checkout"},r.a.createElement("h4",null,"Check out"),r.a.createElement("div",{className:"order"},r.a.createElement("p",null,"Order Summary"),r.a.createElement("div",{className:"summary"},p.contents&&p.contents.length&&p.contents.map((function(e){return r.a.createElement("div",{className:"units stop",key:e._id},e.name," (",e.quantity," unit",e.quantity>1?"s":"",") - ",r.a.createElement("span",{style:{color:"#FF6663"}},e.price))}))),r.a.createElement("div",{className:"summary left"},r.a.createElement("div",{className:"units"},r.a.createElement("span",{style:{color:"#FF6663"}},"Total:")," ",r.a.createElement("span",null,p.total?p.total.toFixed(2):0)),r.a.createElement("div",{className:"units"},r.a.createElement("span",{style:{color:"#FF6663"}},"Agreed price:")," ",r.a.createElement("span",null,p.agreedPrice?p.agreedPrice.toFixed(2):0)),r.a.createElement("div",{className:"units"},r.a.createElement("span",{style:{color:"#FF6663"}},"Payment preference:")," ",r.a.createElement("span",null,p.paymentPreference)),r.a.createElement("div",{className:"units"},r.a.createElement("span",{style:{color:"#FF6663"}},"Date saved:")," ",r.a.createElement("span",null,E.toLocaleDateString("en-GB")))))),r.a.createElement("div",{className:"lower"},r.a.createElement("h4",null,"Payment Methods"),r.a.createElement("div",{className:"infotext"},"Payment is enabled when cart is confirmed"),r.a.createElement(_t.a,{accordion:!0},r.a.createElement(Mt,{header:"Pay with card",key:"1",disabled:p.finalLock},r.a.createElement(Ft.StripeProvider,{apiKey:"pk_test_H8Ph7y3z5k1zPreo3Hu2i94Q00LVbX4bY3",stripeAccount:m},r.a.createElement(Yt,{clientId:l}))),r.a.createElement(Mt,{header:"Pay with USSD",key:"2",disabled:p.finalLock},r.a.createElement("div",{className:"cash-text"},"Transfer ",p.agreedPrice," to the seller, and once they confirm receipt, you\u2019ll be redirected automatically to the order confirmation page. (Note: the speed of this process depends on how quickly the seller can confirm receipt.)")),r.a.createElement(Mt,{header:"Pay in person",key:"3",disabled:p.finalLock},r.a.createElement("div",{className:"cash-text"},"Please note that payment in person depends entirely on the seller\u2019s willingness to keep these items in waiting for you. Most sellers tend to favor people who are buying items immediately."),r.a.createElement("div",{className:"cash-text"},"Follow these instructions to pay in person:",r.a.createElement("div",null,"1. Click here to copy your cart URL"),r.a.createElement("div",null,"2. Click the WhatsApp icon below to share your cart URL and discuss arrangements for paying in person.")),r.a.createElement("div",{className:"cash-text"},"This arrangement deals in honor: reneging on this arrangement prevents the seller from clearing items they could have sold to someone else and makes them lose faith in humanity. You wouldn\u2019t want that, would you?"))),r.a.createElement("div",{className:"save"},r.a.createElement(te.b,{to:"/store/".concat(p.storeId)},r.a.createElement("div",{className:"save-btn"},"Abort Transaction")))))};var Bt=function(e){var t=e.match.params.id;return r.a.createElement("div",null,r.a.createElement(zt,{cartId:t}))},Vt=X.a.create({name:"save_for_later"})((function(e){return r.a.createElement(ke.a,{visible:e.visible,title:"Save cart",okText:"Save",onCancel:e.onCancel,onOk:e.onCreate},r.a.createElement(X.a,{layout:"vertical"},r.a.createElement(X.a.Item,{style:{display:"flex",flexDirection:"column"},label:"Enter your email address to get your cart link"},e.form.getFieldDecorator("email",{rules:[{required:!0,message:"Please tell us your email address"}]})(r.a.createElement(J.a,{type:"email"})))))})),Wt=function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),i=Object(Q.a)(o,2),u=i[0],m=i[1],d=Object(s.d)((function(e){return e.cart})),p=Object(s.d)((function(e){return e.user.user._id})),E=Object(s.c)(),f=Object(n.useState)(""),v=Object(Q.a)(f,2),h=v[0],y=v[1],g=Object(s.d)((function(e){return e.user.user}));Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)y("\xa3");else if("DOL"===e.currency)y("$");else if("EUR"===e.currency)y("\u20ac");else{if("YEN"!==e.currency)return;y("\xa5")}}(g)}),[g]);var b=function(e){E(function(e){return{type:j,payload:e}}(e))},N=function(e){E(function(e){return{type:C,payload:e}}(e))},O=Object(n.useCallback)((function(e){null!==e&&m(e)}),[]),w=function(e){return e.reduce((function(e,t){return e+t.price*t.quantity}),0)};return r.a.createElement("div",{className:"cover review"},r.a.createElement("div",{className:"store-top review-top"},r.a.createElement("div",{className:"review-text"},r.a.createElement(K.a,{type:"shopping-cart",style:{fontSize:"3rem"}}),r.a.createElement("div",{id:"rev"},r.a.createElement("h4",null,"Review Your Order"),r.a.createElement("p",{id:"grey"},"This is your chance to check your order before going to payments. Make it count.")),r.a.createElement("div",null,r.a.createElement("p",null,"Got a question about your order? You can ask the seller on Whatsapp by clicking here."))),r.a.createElement("div",{className:"content"},r.a.createElement(ze.a,{itemLayout:"horizontal",dataSource:d,renderItem:function(e){return r.a.createElement(ze.a.Item,null,r.a.createElement("div",{className:"controls"},r.a.createElement("div",{onClick:function(){return N(e.productId)},className:"clicks"},"-"),r.a.createElement("div",{className:"clicks count"},e.quantity),r.a.createElement("div",{onClick:function(){return b(e.productId)},className:"clicks"},"+")),r.a.createElement(ze.a.Item.Meta,{title:e.name,description:"".concat(h).concat(e.price)}),r.a.createElement("div",{onClick:function(){return function(e){E(Ee(e))}({_id:e.productId})},className:"cancel"},"X"))}}),d.length>0?r.a.createElement("div",{className:"button-body"},r.a.createElement("div",{onClick:function(){l(!0)},style:{backgroundColor:"#0B3954"},className:"button"},"Save for later"),r.a.createElement(Vt,{ref:O,visible:c,onCancel:function(){l(!1)},onCreate:function(e){u.validateFields((function(e,t){if(!e){var a=d.map((function(e){return{product:e.productId,quantity:e.quantity}})),n={email:t.email,contents:a,total:w(d),agreedPrice:w(d),paymentPreference:"card"};ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/store/".concat(p,"/cart"),n).then((function(e){u.resetFields(),function(){var e=ke.a.success({title:"Sent! ",content:"Check your email for your cart link"});setTimeout((function(){W.push("/store/".concat(p)),e.destroy()}),3e3)}(),l(!1)})).catch((function(e){$.a.error(e.message)}))}}))}}),r.a.createElement(te.b,{to:"/savecart"},r.a.createElement("div",{style:{backgroundColor:"#FF6663"},className:"button"},"Go to Checkout"))):"Please add items to your cart!")))},Gt=J.a.Search,Ht=function(e){var t,a=e.logoPath,c=(e.badgeCount,e.currency,e.totalDue,e.displayBack),l=e.displayTotal,o=e.top,i=void 0!==o&&o,u=Object(n.useState)(""),m=Object(Q.a)(u,2),d=m[0],p=m[1],E=Object(s.c)(),f=Object(s.d)((function(e){return e.cart})),v=Object(s.d)((function(e){return e.user.user}));return Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)p("\xa3");else if("DOL"===e.currency)p("$");else if("EUR"===e.currency)p("\u20ac");else{if("YEN"!==e.currency)return;p("\xa5")}}(v)}),[v]),r.a.createElement(Lt.a,{className:i?"color cart-header":"cart-header",type:"flex",justify:"space-between",align:"middle"},r.a.createElement(Dt.a,{span:6,className:"logo"},c?r.a.createElement(K.a,{onClick:W.goBack,type:"left-circle"}):r.a.createElement("img",{src:a||ne.a,alt:"Store Logo"})),r.a.createElement(Dt.a,{span:12,className:"total"},l?"Total: ".concat(d).concat((t=f,t.reduce((function(e,t){return e+t.price*t.quantity}),0)).toFixed(2)):r.a.createElement(Gt,{onChange:function(e){E(de(e.target.value))},placeholder:"search"})),r.a.createElement(te.b,{to:"/review"},r.a.createElement(Dt.a,{span:6,className:"icon"},r.a.createElement(xt.a,{style:{backgroundColor:"gold",color:"black"},count:function(e){return e.reduce((function(e,t){return e+t.quantity}),0)}(f)},r.a.createElement(K.a,{type:"shopping-cart",style:{color:"black"}})))))};var Xt=function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(s.d)((function(e){return e.cart})),i=0;return window.addEventListener("scroll",(function(){var e=window.pageYOffset||document.documentElement.scrollTop;l(e>i),i=e<=0?0:e}),!1),r.a.createElement("div",null,r.a.createElement(Ht,{top:c,displayBack:!0,displayTotal:!0,badgeCount:o.length}),r.a.createElement(Wt,null))},Jt=function(e){var t=Object(n.useState)(""),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({}),s=Object(Q.a)(o,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){l(localStorage.getItem("storeUrl")),u(Object(D.a)({},JSON.parse(localStorage.getItem("user"))))}),[]),r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"store-logo"},null===i.imageUrl?void 0:r.a.createElement("img",{alt:"logo",src:i.imageUrl,className:"image",width:"150",style:{borderRadius:"50%"}})),r.a.createElement("h2",{className:"text"},"Order confirmed Successfully!"),r.a.createElement("p",{className:"text"},"Your order for the item was successfully processed"),r.a.createElement("p",{className:"text"},"Arrangements are being made for you to receive your product"),r.a.createElement(H.a,{id:"delete-btn",type:"link",htmlType:"button"},r.a.createElement(te.a,{to:c},"Back to ",i.storeName)))},Kt=(a(665),a(279).a.Paragraph);var $t=function(e){var t,a=Object(n.useState)([]),c=Object(Q.a)(a,2),l=c[0],o=c[1],i=e.productId,u=Object(s.c)(),m=Object(s.d)((function(e){return e.cart}));return Object(n.useEffect)((function(){ee.a.get("https://shopping-cart-eu3.herokuapp.com/api/store/products/".concat(i)).then((function(e){o(e.data)})).catch((function(e){return console.log(e)}))}),[i]),r.a.createElement("div",{className:"single-cover"},r.a.createElement("div",{className:"kol"},r.a.createElement(Ve.a,{className:"img"},l.images&&l.images.length&&l.images.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{style:{width:"100%",margin:"0"},src:e,alt:"product"}))}))),r.a.createElement("div",{className:"subKol"},r.a.createElement("div",{className:"subNameDesc"},r.a.createElement("h1",null,l.name),r.a.createElement("div",null,r.a.createElement(Kt,{ellipsis:{rows:3,expandable:!0}},l.description))),r.a.createElement("div",{className:"subButton"},(t=l,m.find((function(e){return e.productId===t._id}))?r.a.createElement(H.a,{style:{backgroundColor:"#FF6663",border:"0"},onClick:function(){return function(e){u(Ee(e))}(l)}},"Remove from Cart"):r.a.createElement(H.a,{style:{border:"0"},onClick:function(){return function(e){u(pe(e))}(l)}},"Add to Cart"))),r.a.createElement(te.b,{to:"/review"},r.a.createElement("div",{style:{backgroundColor:"#00000",border:"0",borderRadius:"1.5rem"},className:"subFooter"},r.a.createElement("h1",null,"Go to your cart"),r.a.createElement(K.a,{style:{fontSize:"2.5rem",color:"white",marginTop:"0.9rem",marginLeft:"0.4rem"},type:"shopping-cart"}))))))};var Qt=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),c=Object(Q.a)(a,2),l=c[0],o=c[1],i=Object(s.d)((function(e){return e.cart})),u=Object(s.d)((function(e){return e.user})),m=0;return window.addEventListener("scroll",(function(){var e=window.pageYOffset||document.documentElement.scrollTop;o(e>m),m=e<=0?0:e}),!1),r.a.createElement("div",null,r.a.createElement(Ht,{top:l,displayTotal:!0,badgeCount:i.length,logoPath:u.user.imageUrl,displayBack:e.history.goBack}),r.a.createElement($t,{productId:t}))},Zt=(a(258),a(155)),ea=(a(256),a(43)),ta=X.a.create({name:"register"})((function(e){var t=Object(n.useState)(!0),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(s.d)((function(e){return e.cart})),i=Object(s.d)((function(e){return e.user.user._id})),u=Object(n.useState)(""),m=Object(Q.a)(u,2),d=m[0],p=m[1],E=Object(s.d)((function(e){return e.user.user}));Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)p("\xa3");else if("DOL"===e.currency)p("$");else if("EUR"===e.currency)p("\u20ac");else{if("YEN"!==e.currency)return;p("\xa5")}}(E)}),[E]);var f=o.filter((function(e){return e.quantity>0})),v=o.map((function(e){return{product:e.productId,quantity:e.quantity}})),h=function(e){return e.reduce((function(e,t){return e+t.price*t.quantity}),0)},y=function(e){ke.a.info({title:"Forwarding to WhatsApp",content:"When you click OK you'll be redirected to WhatsApp to contact the seller with your sales enquiry so they can confirm stock availability and delivery / collection details.",onOk:function(){var t={contents:v,deliveryOrCollection:e.delivery,checkoutDate:e.date._d,paymentPreference:e.payment,address:e.address?e.address:"no address",total:h(f),agreedPrice:h(f),email:"no@email.com",storeId:i};ee.a.post("https://shopping-cart-eu3.herokuapp.com/api/store/".concat(i,"/cart/submit"),t).then((function(e){var t=e.data,a=t.text,n=t.sellerPhone;window.location="https://api.whatsapp.com/send?phone=".concat(n,"&text=").concat(a)})).catch((function(e){console.log(e)}))}})},g=e.form.getFieldDecorator;return r.a.createElement("div",{className:"savecart-cover"},r.a.createElement("div",{id:"inner"},r.a.createElement("div",{className:"checkout"},r.a.createElement("div",{className:"order"},r.a.createElement("p",null,"Order Summary"),r.a.createElement("div",{className:"summary"},f.map((function(e){return r.a.createElement("div",{className:"units",key:e.productId},e.name," (",e.quantity," unit",e.quantity>1?"s":"",") - ",d,e.price)}))))),r.a.createElement("div",{className:"lower"},r.a.createElement(X.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll({force:!0},(function(e,t){e||y(t)}))}}),r.a.createElement("div",{id:"header"},r.a.createElement("p",null,"Take a second to tell us your collection/delivery and payments preferences.")),r.a.createElement(X.a.Item,{label:"Delivery option"},g("delivery")(r.a.createElement(ea.a.Group,null,r.a.createElement(ea.a,{onClick:function(){l(!0)},value:"Delivery"},"Delivery"),r.a.createElement(ea.a,{onClick:function(){l(!1)},value:"Collection"},"Collection")))),r.a.createElement("span",{className:c?"addy":"info"},"Please wait for confirmation from the seller that your order is available and then collect it from: ",E.address),r.a.createElement("span",{className:c?"info":"addy"},"Enter your delivery address in the field below if you opt for delivery. If you would rather collect the item in person, the seller will contact you with the Whatsapp number you provided above"),r.a.createElement(X.a.Item,{className:c?"ant-rowant-form-item":"addy",label:"Delivery Address"},g("address",{rules:[{required:!1,message:"Please input your address!"}]})(r.a.createElement(J.a,null))),r.a.createElement(X.a.Item,{label:"Collection/Delivery date"},g("date",{rules:[{type:"object",required:!1,message:"Please select time!"}]})(r.a.createElement(Zt.a,null))),r.a.createElement(X.a.Item,{label:"Payment preference"},g("payment")(r.a.createElement(ea.a.Group,null,r.a.createElement(ea.a,{value:"Cash"},"Pay with Cash"),r.a.createElement(ea.a,{value:"Card"},"Pay with Card"),r.a.createElement(ea.a,{value:"USSD"},"Pay with USSD")))),r.a.createElement(X.a.Item,Object.assign({className:"primary"},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Submit"))))))}));var aa=function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],l=a[1],o=Object(s.d)((function(e){return e.cart})),i=0;return window.addEventListener("scroll",(function(){var e=window.pageYOffset||document.documentElement.scrollTop;l(e>i),i=e<=0?0:e}),!1),r.a.createElement("div",null,r.a.createElement(Ht,{top:c,displayBack:!0,displayTotal:!0,badgeCount:o.length}),r.a.createElement(ta,null))},na=(a(672),"https://shopping-cart-eu3.herokuapp.com/api/store"),ra="https://shopping-cart-eu3.herokuapp.com/api/auth/stripe";var ca=function(){var e=Object(n.useState)(""),t=Object(Q.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(Q.a)(l,2),s=o[0],i=o[1];Object(n.useEffect)((function(){oe().get(na).then((function(e){i(e.data._id),c(e.data.stripeId)})).catch((function(e){console.log(e)}))}),[]);var u=function(e){e.preventDefault(),ee.a.post(ra,{storeId:s}).then((function(e){console.log(e),window.location.href=ra})).catch((function(e){console.log(e)}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"main"},r.a.createElement("h2",null,"Account"),r.a.createElement(We.a,{className:"Card",title:"Your Stripe ID",style:{fontWeight:"900"}},r.a.createElement("p",{id:"stripeID"},a||"Your stripe account is not connected")),a?r.a.createElement(H.a,{onClick:u},"Change Stripe Id"):r.a.createElement(H.a,{onClick:u},"Connect to Stripe")),r.a.createElement(Ze,null))},la=(a(675),a(278)),oa=a(21),sa=a.n(oa),ia=X.a.create({name:"confirm"})((function(e){var t=e.match.params.id,a=Object(s.d)((function(e){return e.savedCart})),c=Object(s.d)((function(e){return e.user.user})),l=Object(s.c)(),o=Object(n.useState)(a),i=Object(Q.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(Q.a)(d,2),E=p[0],f=p[1];Object(n.useEffect)((function(){!function(e){if("POU"===e.currency)f("\xa3");else if("DOL"===e.currency)f("$");else if("EUR"===e.currency)f("\u20ac");else{if("YEN"!==e.currency)return;f("\xa5")}}(c)}),[c]);var v=function(e){return e.reduce((function(e,t){return e+t.price*t.quantity}),0)},h=u.contents&&u.contents.map((function(e){return{product:e.product,quantity:e.quantity}})),y=e.form.getFieldDecorator;Object(n.useEffect)((function(){l(ie(t))}),[l,t]),Object(n.useEffect)((function(){m(a)}),[a]),Object(n.useEffect)((function(){l(ye(a.storeId))}),[l,a.storeId]);return r.a.createElement("div",{className:"payments-cover"},r.a.createElement("div",{className:"checkout"},r.a.createElement("h4",null,"Cart Confirmation"),r.a.createElement("div",{className:"order"},r.a.createElement("p",null,"Order Summary"),r.a.createElement("div",{className:"summary flex"},r.a.createElement(ze.a,{itemLayout:"horizontal",dataSource:u.contents,renderItem:function(e){return r.a.createElement(ze.a.Item,null,a.finalLock?r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"clicks count"},e.quantity)):r.a.createElement("div",{className:"controls"},r.a.createElement("div",{onClick:function(){return function(e){var t=Object(D.a)({},u,{contents:u.contents.map((function(t){var a;return t._id===e?Object(D.a)({},t,{quantity:(a=t.quantity,1===a?1:a-1)}):Object(D.a)({},t)}))});m(t)}(e._id)},className:"clicks"},"-"),r.a.createElement("div",{className:"clicks count"},e.quantity),r.a.createElement("div",{onClick:function(){return function(e){var t=Object(D.a)({},u,{contents:u.contents.map((function(t){return t._id===e?Object(D.a)({},t,{quantity:t.quantity+1}):Object(D.a)({},t)}))});m(t)}(e._id)},className:"clicks"},"+")),r.a.createElement(ze.a.Item.Meta,{title:e.name,description:"".concat(E).concat(e.price)}),a.finalLock?null:r.a.createElement(la.a,{title:"Are you sure remove this item?",onConfirm:function(){return function(e){var t=Object(D.a)({},u,{contents:u.contents.filter((function(t){return t._id!==e}))});m(t)}(e._id)},okText:"Yes",cancelText:"No"},r.a.createElement("div",{className:"cancel"},"X")))}})),r.a.createElement("div",{className:"summary left"},r.a.createElement("div",{className:"units"},r.a.createElement("span",{style:{color:"#FF6663"}},"Total:")," ",r.a.createElement("span",null,E,u.contents?v(u.contents):a.total))))),r.a.createElement("div",{className:"lower"},r.a.createElement(X.a,{onSubmit:function(n){n.preventDefault(),e.form.validateFieldsAndScroll((function(e,n){var r={storeId:a.storeId,agreedPrice:parseInt(n.agreedPrice),total:v(u.contents),checkoutDate:n.checkoutDate._d,paymentPreference:n.paymentPreference,deliveryOrCollection:n.delivery,contents:h};e?$.a.error("Enter Required Fields"):(console.log(r),oe().put("https://shopping-cart-eu3.herokuapp.com/api/store/cart/".concat(t,"/approve"),r).then((function(e){l(ie(t))})).catch((function(e){console.log(e)})))}))}},r.a.createElement(X.a.Item,{label:"Agreed price"},y("agreedPrice",{initialValue:a.agreedPrice,rules:[{required:!0,message:"Enter agreed price"}]})(r.a.createElement(J.a,{className:"form-input",placeholder:"Agreed Price",disabled:a.finalLock}))),r.a.createElement(X.a.Item,{label:"Payment preference"},y("paymentPreference",{initialValue:a.paymentPreference,rules:[{required:!0,message:"Select Payment Preference"}]})(r.a.createElement(ea.a.Group,{disabled:a.finalLock},r.a.createElement(ea.a,{value:"Cash"},"Pay with Cash"),r.a.createElement(ea.a,{value:"Card"},"Pay with Card"),r.a.createElement(ea.a,{value:"USSD"},"Pay with USSD")))),r.a.createElement(X.a.Item,{label:"Delivery preference"},y("delivery",{rules:[{required:!0,message:"Enter Delivery preference"}]})(r.a.createElement(ea.a.Group,{disabled:a.finalLock},r.a.createElement(ea.a,{value:"Delivery"},"Delivery"),r.a.createElement(ea.a,{value:"Collection"},"Collection")))),r.a.createElement(X.a.Item,{label:"Collection/Delivery Date"},y("checkoutDate",{initialValue:sa()(a.checkoutDate),type:"object",rules:[{required:!0,message:"Enter Collection Date"}]})(r.a.createElement(Zt.a,{disabled:a.finalLock}))),r.a.createElement(X.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},a.finalLock?r.a.createElement("div",{style:{backgroundColor:"#FF6663",color:"white"}},"Cart Approved"):r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Approve cart")))))}));var ua=function(){return r.a.createElement(o.d,null,r.a.createElement(Me,{path:"/register",component:be}),r.a.createElement(Me,{exact:!0,path:"/",component:Oe}),r.a.createElement(Ye,{path:"/inventory",component:et}),r.a.createElement(Me,{path:"/resetpassword",component:we}),r.a.createElement(Me,{path:"/setnewpassword",component:je}),r.a.createElement(Me,{path:"/store/:id",component:Rt}),r.a.createElement(Me,{path:"/cart/:id",component:localStorage.getItem("token")?ia:Bt}),r.a.createElement(Me,{path:"/review",component:Xt}),r.a.createElement(Me,{path:"/savecart",component:aa}),r.a.createElement(Ye,{path:"/createstore",component:xe}),r.a.createElement(Ye,{path:"/addlogo",component:Te}),r.a.createElement(Ye,{path:"/profile",component:lt}),r.a.createElement(Ye,{path:"/createitem",component:Fe}),r.a.createElement(Ye,{path:"/dashboard",component:wt}),r.a.createElement(Ye,{path:"/updateitem/:id",component:Ue}),r.a.createElement(Me,{path:"/product/:id",component:Qt}),r.a.createElement(Me,{path:"/success",component:Jt}),r.a.createElement(Me,{exact:!0,path:"/elements/Logo",component:re}),r.a.createElement(Me,{exact:!0,path:"/elements/cartheader",component:Ht}),r.a.createElement(Ye,{path:"/account",component:ca}))},ma=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function da(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(o.c,{history:W},r.a.createElement(s.a,{store:B},r.a.createElement(ua,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/serviceWorker.js");ma?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):da(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):da(t,e)}))}}()}},[[281,1,2]]]);
//# sourceMappingURL=main.9d96a5ef.chunk.js.map